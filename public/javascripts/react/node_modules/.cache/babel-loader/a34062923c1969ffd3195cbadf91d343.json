{"ast":null,"code":"import _slicedToArray from\"/workspace/fullstack-advogada/public/javascripts/react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/workspace/fullstack-advogada/public/javascripts/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/workspace/fullstack-advogada/public/javascripts/react/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/workspace/fullstack-advogada/public/javascripts/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/workspace/fullstack-advogada/public/javascripts/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/workspace/fullstack-advogada/public/javascripts/react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/workspace/fullstack-advogada/public/javascripts/react/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import M from\"materialize-css\";import $ from'jquery';var CustosColetivos=/*#__PURE__*/function(_React$Component){_inherits(CustosColetivos,_React$Component);function CustosColetivos(props){var _this;_classCallCheck(this,CustosColetivos);_this=_possibleConstructorReturn(this,_getPrototypeOf(CustosColetivos).call(this,props));// this.handleChange = this.handleChange.bind(this);\nvar lista=props.lista;_this.addItem=_this.addItem.bind(_assertThisInitialized(_this));_this.rmItem=_this.rmItem.bind(_assertThisInitialized(_this));_this.state={// \"DataSource\" é uma fonte de dados global\nlista:lista,total:_this.props.totalColetivo,nr_pessoas:1};return _this;}_createClass(CustosColetivos,[{key:\"componentDidMount\",value:function componentDidMount(){this.nrItens=0;M.AutoInit();}},{key:\"rmItem\",value:function rmItem(e){var lista=this.state.lista;var id=$(e.target).prop('id');var nr_pessoas=$('#cc_nr_pessoas').val();lista=lista.filter(function(item){return item.id!==id;});var valor=lista.reduce(function(acumulador,i){return acumulador+i.valor;},0);this.setState({lista:lista});this.setState({lista:lista,total:valor/nr_pessoas});this.props.onTotalColetivoChange(valor/nr_pessoas);}},{key:\"addItem\",value:function addItem(){var lista=this.state.lista;var nr_pessoas=$('#cc_nr_pessoas').val();if(!nr_pessoas){nr_pessoas=1;$('#cc_nr_pessoas').val(1);}var o={id:\"cc_\"+lista.length+1,item:$('#cc_item-despesa').val(),valor:parseInt($('#cc_item-valor').val())};if(!o.item||!o.valor){return;}lista.push(o);$('#cc_item-despesa').val('');$('#cc_item-valor').val('');var valor=parseFloat(this.state.total)+o.valor/nr_pessoas;valor=valor.toFixed(2).replace('.',',');this.setState({lista:lista,total:valor,nr_pessoas:nr_pessoas});this.props.onTotalColetivoChange(valor);}},{key:\"render\",value:function render(){var itens=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.state.lista.entries()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _ref3=_step.value;var _ref2=_slicedToArray(_ref3,2);var index=_ref2[0];var value=_ref2[1];var valor=value.valor;itens.push(React.createElement(\"tr\",{\"data-key\":value.id},React.createElement(\"td\",null,value.item),React.createElement(\"td\",null,valor.toFixed(2).replace('.',',')),React.createElement(\"td\",null,React.createElement(\"a\",{class:\"btn-floating btn-small waves-effect waves-light red\",onClick:this.rmItem},React.createElement(\"i\",{id:value.id,class:\"material-icons\"},\"remove\")))));}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}var total=parseFloat(this.state.total);return React.createElement(\"div\",{className:\"card-panel\"},React.createElement(\"div\",{id:\"modal-help-gcoletivo\",class:\"modal\"},React.createElement(\"div\",{class:\"modal-content\"},React.createElement(\"h6\",null,\"Gastos coletivos\"),React.createElement(\"p\",null,\"Aqui voc\\xEA vai discriminar somente os gastos coletivos de todas as pessoas da moradia, por exemplo: Aluguel, luz, \\xE1gua, etc.\",React.createElement(\"br\",null),\"Estes gastos s\\xE3o divididos pelo n\\xFAmero de moradores da casa, para o c\\xE1lculo do valor proporcional de cada morador e por consequ\\xEAncia o gasto individual do beneficiado.\")),React.createElement(\"div\",{class:\"modal-footer\"},React.createElement(\"a\",{href:\"#!\",class:\"modal-close waves-effect  btn-small\"},\"ok\"))),React.createElement(\"div\",{class:\"row\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"h6\",null,\"Gastos coletivos dos moradores da resid\\xEAncia\",React.createElement(\"a\",{class:\"waves-effect waves-light btn-help modal-trigger\",href:\"#modal-help-gcoletivo\"},React.createElement(\"i\",{class:\"material-icons\"},\"info\"))))),React.createElement(\"div\",{class:\"row\"},React.createElement(\"div\",{class:\"input-field col s12\"},React.createElement(\"input\",{placeholder:\"\",id:\"cc_nr_pessoas\",type:\"text\",class:\"validate\"}),React.createElement(\"label\",{for:\"nr_pessoas\"},\"Quantas pessoas moram na resid\\xEAncia?\")),React.createElement(\"div\",{class:\"input-field col s12 forms-table\"},React.createElement(\"input\",{placeholder:\"\",id:\"cc_item-despesa\",type:\"text\",class:\"validate\"}),React.createElement(\"label\",{for:\"item-despesa\"},\"Discri\\xE7\\xE3o da despesa\")),React.createElement(\"div\",{class:\"input-field col s8 m4 l10 forms-table\"},React.createElement(\"input\",{id:\"cc_item-valor\",type:\"number\",class:\"validate\"}),React.createElement(\"label\",{for:\"item-valor\"},\"Valor da despesa\")),React.createElement(\"div\",{class:\"input-field col s4 m4 l2 forms-table\"},React.createElement(\"a\",{class:\"btn-floating btn-large waves-effect waves-light red\",onClick:this.addItem},React.createElement(\"i\",{class:\"material-icons\"},\"add\")))),React.createElement(\"div\",{class:\"row\"},React.createElement(\"table\",{class:\"responsive-table highlight\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Despesa\"),React.createElement(\"th\",null,\"Valor\"),React.createElement(\"th\",null))),React.createElement(\"tbody\",{id:\"table-custos-individuais\"},itens),React.createElement(\"tfoot\",null,React.createElement(\"tr\",null,React.createElement(\"td\",{colspan:\"2\"},\"Total Gastos Individuais do Beneficiado\"),React.createElement(\"td\",null,\"R$ \",total.toFixed(2).replace('.',',')))))));}}]);return CustosColetivos;}(React.Component);export default CustosColetivos;","map":{"version":3,"sources":["/workspace/fullstack-advogada/public/javascripts/react/src/compontentes/calc-pensao/CustosColetivos.js"],"names":["React","M","$","CustosColetivos","props","lista","addItem","bind","rmItem","state","total","totalColetivo","nr_pessoas","nrItens","AutoInit","e","id","target","prop","val","filter","item","valor","reduce","acumulador","i","setState","onTotalColetivoChange","o","length","parseInt","push","parseFloat","toFixed","replace","itens","entries","index","value","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport M from \"materialize-css\";\nimport $ from 'jquery';\n\nclass CustosColetivos extends React.Component{\n    constructor(props) {\n        super(props);\n        // this.handleChange = this.handleChange.bind(this);\n        let lista = props.lista\n        this.addItem = this.addItem.bind(this);\n        this.rmItem = this.rmItem.bind(this);\n        this.state = {\n            // \"DataSource\" é uma fonte de dados global\n            lista: lista,\n            total: this.props.totalColetivo,\n            nr_pessoas:1\n        };\n    }\n    componentDidMount() {\n        this.nrItens = 0\n        M.AutoInit();\n    }\n    rmItem(e){\n        let lista = this.state.lista;\n        let id = $(e.target).prop('id')\n        let nr_pessoas = $('#cc_nr_pessoas').val()\n        lista = lista.filter( function(item){ \n            \n            return item.id !== id\n        })\n        \n        let valor = lista.reduce((acumulador, i)=>{\n            return acumulador + i.valor;\n        },0)\n        this.setState({lista: lista})\n        this.setState({lista: lista, total: valor/nr_pessoas})\n        this.props.onTotalColetivoChange(valor/nr_pessoas);\n    }\n    addItem(){\n        let lista = this.state.lista;\n        let nr_pessoas = $('#cc_nr_pessoas').val()\n        if(!nr_pessoas){\n            nr_pessoas = 1\n            $('#cc_nr_pessoas').val(1)\n        }\n        let o = {\n            id: \"cc_\"+lista.length+1,\n            item: $('#cc_item-despesa').val(),\n            valor: parseInt($('#cc_item-valor').val())\n        }\n         if(!o.item || !o.valor){\n            return;\n        }\n        lista.push(o)\n        $('#cc_item-despesa').val('');\n        $('#cc_item-valor').val('');\n        let valor = parseFloat(this.state.total) + (o.valor/nr_pessoas)\n        valor = valor.toFixed(2).replace('.',',')\n        this.setState({lista: lista, total: valor, nr_pessoas:nr_pessoas})\n        this.props.onTotalColetivoChange(valor);\n    }\n    render(){\n        let itens = [];\n        for (const [index, value] of this.state.lista.entries()) {\n            let valor = value.valor\n            itens.push(\n                <tr data-key={value.id}>\n                    <td>{value.item}</td>\n                    <td>{valor.toFixed(2).replace('.',',')}</td>\n                    <td>\n                        <a class=\"btn-floating btn-small waves-effect waves-light red\" onClick={this.rmItem}>\n                        <i id={value.id} class=\"material-icons\">remove</i>\n                        </a>\n                    </td>\n                </tr>\n            );\n        }\n        let total = parseFloat(this.state.total)\n        return (\n            <div  className=\"card-panel\">\n                <div id=\"modal-help-gcoletivo\" class=\"modal\">\n                    <div class=\"modal-content\">\n                    <h6>Gastos coletivos</h6>\n                    <p>\n                        Aqui você vai discriminar somente os gastos coletivos de todas as pessoas da moradia, por exemplo: Aluguel, luz, água, etc.\n                        <br></br>\n                        Estes gastos são divididos pelo número de moradores da casa, para o cálculo do valor proporcional de cada morador e por consequência o gasto individual do beneficiado.\n                    </p>\n                    </div>\n                    <div class=\"modal-footer\">\n                    <a href=\"#!\" class=\"modal-close waves-effect  btn-small\">ok</a>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div className='col'>\n                        <h6>Gastos coletivos dos moradores da residência\n                            <a class=\"waves-effect waves-light btn-help modal-trigger\" href=\"#modal-help-gcoletivo\">\n                                <i class=\"material-icons\">info</i>\n                            </a>\n                        </h6>\n                    </div>\n                </div>\n                <div class=\"row\"> \n                    <div class=\"input-field col s12\">\n                        <input placeholder=\"\" id=\"cc_nr_pessoas\" type=\"text\" class=\"validate\"/>\n                        <label for=\"nr_pessoas\">Quantas pessoas moram na residência?</label>\n                    </div>\n                    <div class=\"input-field col s12 forms-table\">\n                        <input placeholder=\"\" id=\"cc_item-despesa\" type=\"text\" class=\"validate\"/>\n                        <label for=\"item-despesa\">Discrição da despesa</label>\n                    </div>\n                    <div class=\"input-field col s8 m4 l10 forms-table\">\n                        <input id=\"cc_item-valor\" type=\"number\" class=\"validate\"/>\n                        <label for=\"item-valor\">Valor da despesa</label>\n                       \n                    </div>\n                    <div class=\"input-field col s4 m4 l2 forms-table\">\n                        <a class=\"btn-floating btn-large waves-effect waves-light red\" onClick={this.addItem} ><i class=\"material-icons\">add</i></a>\n                    </div>\n                </div>\n                <div class='row' >\n                   <table class='responsive-table highlight'>\n                        <thead>\n                        <tr>\n                            <th>Despesa</th>\n                            <th>Valor</th>\n                            <th></th>\n                        </tr>\n                        </thead>\n\n                        <tbody id='table-custos-individuais'>\n                        {itens}\n                        </tbody>\n                        <tfoot>\n                            <tr>\n                                <td colspan='2'>Total Gastos Individuais do Beneficiado</td>\n                                <td>R$ {total.toFixed(2).replace('.', ',')}</td>\n                                \n                            </tr>\n                        </tfoot>\n                    </table>\n\n                </div>\n            </div>\n        )\n       \n    }\n}\nexport default CustosColetivos"]},"metadata":{},"sourceType":"module"}